"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{13279:function(e,t,r){r.d(t,{Z:function(){return x}});var s=r(52676),n=r(75347),o=r.n(n),a=r(75271),i=r(3335),l=r(88091),c={src:"/_next/static/media/mic.0643f3f0.svg",height:18,width:18,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/right.d37c2fbb.svg",height:18,width:18,blurWidth:0,blurHeight:0},h=r(98950),u=e=>{var t,s,n,o;let[i,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),[h,u]=(0,a.useState)(""),[p,x]=(0,a.useState)(null);return(0,a.useEffect)(()=>{{let e=window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition;if(e){let t=new e;t.lang="en-US",t.interimResults=!0,t.maxAlternatives=1,t.continuous=!0,x(t)}}},[null===(t=r.g.window)||void 0===t?void 0:t.SpeechRecognition,null===(s=r.g.window)||void 0===s?void 0:s.webkitSpeechRecognition,null===(n=r.g.window)||void 0===n?void 0:n.mozSpeechRecognition,null===(o=r.g.window)||void 0===o?void 0:o.msSpeechRecognition]),{isListening:i,startListening:()=>{p&&(l(!0),p.start(),p.onresult=t=>{let r="",s="";for(let e=t.resultIndex;e<t.results.length;e++){let n=t.results[e][0].transcript;t.results[e].isFinal?s+=n+" ":r+=n}d(e=>e+s),u(r),e(s||r)},p.onerror=e=>{("not-allowed"===e.error||"service-not-allowed"===e.error)&&l(!1)},p.onend=()=>{i&&p.start()},setTimeout(()=>{p.stop(),l(!1)},15e3))},stopListening:()=>{p&&(p.stop(),l(!1))},finalTranscript:c,interimTranscript:h}},p=r(49445);function x(){let[e,t]=(0,a.useState)(""),[,r]=(0,l.KO)(h.EJ),[,n]=(0,l.KO)(h.Kq),[x,f]=(0,l.KO)(h.zK),g=(0,i.usePathname)(),m=(0,i.useRouter)(),[,w]=(0,l.KO)(h.ZC),[,v]=(0,l.KO)(h.tO),{isListening:j,startListening:b,stopListening:y}=u(e=>{t(e)}),S=async e=>{try{let t=await (0,p.FB)(e);w(e=>[...e,t.images])}catch(e){console.error("Error fetching images:",e)}},E=async e=>{try{let t=await (0,p.oo)(e);v(e=>[...e,t.videos])}catch(e){console.error("Error fetching videos:",e)}},C=async e=>{f(!0),t("");let r=e=>{n(t=>{let r=t.responses.length-1;return!(r>=0)||t.responses[r].errors.sourcesError||t.responses[r].errors.contentError?{...t,responses:[...t.responses,{sources:[],relatedSearches:[],content:"",timestamp:new Date().toISOString(),errors:e,isStreamComplete:!0}]}:{...t,responses:t.responses.map((t,s)=>s===r?{...t,errors:{...t.errors,...e},relatedSearches:t.relatedSearches,isStreamComplete:!0}:t)}})};try{await (0,p.oi)(e,e=>{n(t=>{let r=t.responses.length-1;return{...t,responses:t.responses.map((t,s)=>s===r?{...t,content:t.content+e}:t)}})},e=>{let t=(null==e?void 0:e.sources)||[],r=null==e?void 0:e.related_searches;n(e=>({...e,responses:[...e.responses,{sources:t,relatedSearches:r||[],content:"",timestamp:new Date().toISOString(),errors:{sourcesError:"",contentError:""},isStreamComplete:!1}]}))},e=>{r(e)},()=>{n(e=>{let t=e.responses.length-1;return{...e,responses:e.responses.map((e,r)=>r===t?{...e,isStreamComplete:!0}:e)}})})}catch(e){console.error("Error during postData call:",e)}finally{f(!1)}};return(0,s.jsxs)("div",{className:"__shadow mx-auto mt-12 flex h-[48px] w-full max-w-[87.5%] items-center gap-3 rounded-[8px] border-[0.5px] border-[#DFDFDF] bg-[#FFF] pr-[7px] lg:mx-0 lg:w-[496px] lg:max-w-full",children:[(0,s.jsx)("input",{value:e,onChange:e=>{t(e.target.value)},onKeyDown:t=>{let s=e.trim();"Enter"===t.key&&s&&!j&&("/"==g&&m.push("/search/chat"),r(t=>{let r=t.length>0?t[t.length-1].id:0;return[...t,{id:r+1,value:e,timestamp:new Date().toISOString()}]}),n(t=>({...t,searchValues:[...t.searchValues,e]})),C(e),S(e),E(e))},disabled:x,type:"text",className:"h-full w-full bg-transparent px-3 font-secondary text-[14px] font-[400] leading-[140%] text-[#878787] outline-none placeholder:text-[#878787]",placeholder:"Give Tars a task..."}),(0,s.jsx)("button",{onClick:()=>{x||(j?y():b())},className:"flex h-[34px] w-[34px] items-center justify-center rounded-[6px] bg-[#fff]",children:(0,s.jsx)(o(),{src:c,alt:"search",width:20,height:20})}),(0,s.jsx)("button",{onClick:()=>{e.trim()&&!j&&("/"==g&&m.push("/search/chat"),r(t=>{let r=t.length>0?t[t.length-1].id:0;return[...t,{id:r+1,value:e,timestamp:new Date().toISOString()}]}),n(t=>({...t,searchValues:[...t.searchValues,e]})),C(e),S(e),E(e))},className:"flex h-[34px] min-w-[34px] items-center justify-center rounded-[6px] bg-[#E9E9E9]",children:(0,s.jsx)(o(),{src:d,alt:"search",width:20,height:20})})]})}},16406:function(e,t,r){r.d(t,{Z:function(){return y}});var s=r(52676),n=r(75271),o=r(82704),a=r(88091),i=r(3335),l=r(84010),c={src:"/_next/static/media/short_k.c97f5b19.svg",height:10,width:17,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/hide.8648efec.svg",height:18,width:18,blurWidth:0,blurHeight:0},h={src:"/_next/static/media/sidebar.84eaa16a.svg",height:18,width:18,blurWidth:0,blurHeight:0},u={src:"/_next/static/media/plus.ae54a848.svg",height:18,width:18,blurWidth:0,blurHeight:0},p=r(98950),x={src:"/_next/static/media/trash.8e6a68eb.svg",height:18,width:18,blurWidth:0,blurHeight:0},f=r(75347),g=r.n(f),m=function(e){let{handlePost:t,openDeleteModal:r,filteredHistory:o}=e,[i,l]=(0,n.useState)(null),c=(0,n.useRef)(null),[d,h]=(0,a.KO)(p.EJ);(0,n.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&l(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let u=e=>{h(t=>t.filter(t=>t.id!==e))};return(0,s.jsx)("div",{className:"flex flex-col gap-2",children:Object.keys(o).length>0?Object.entries(o).map((e,r)=>{let[n,o]=e;return(0,s.jsx)("div",{className:"flex cursor-pointer flex-col gap-[10px]",children:o.slice().reverse().map((e,r)=>(0,s.jsxs)("div",{className:"px-1 py-1.5 relative flex gap-1 justify-between rounded-lg text-white",children:[(0,s.jsx)("p",{onClick:()=>t(e.value),className:"text-[13px] font-[400] leading-[140%] text-black font-secondary tracking-[-0.34px] break-all cursor-pointer",children:e.value}),(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"group-hover:block z-5 cursor-pointer",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",onClick:()=>l(t=>t===e.id?null:e.id),children:[(0,s.jsx)("path",{d:"M7.5 9C7.5 8.17157 8.17157 7.5 9 7.5C9.82843 7.5 10.5 8.17157 10.5 9C10.5 9.82843 9.82843 10.5 9 10.5C8.17157 10.5 7.5 9.82843 7.5 9Z",fill:"black"}),(0,s.jsx)("path",{d:"M13.5 9C13.5 8.17157 14.1716 7.5 15 7.5C15.8284 7.5 16.5 8.17157 16.5 9C16.5 9.82843 15.8284 10.5 15 10.5C14.1716 10.5 13.5 9.82843 13.5 9Z",fill:"black"}),(0,s.jsx)("path",{d:"M1.5 9C1.5 8.17157 2.17157 7.5 3 7.5C3.82843 7.5 4.5 8.17157 4.5 9C4.5 9.82843 3.82843 10.5 3 10.5C2.17157 10.5 1.5 9.82843 1.5 9Z",fill:"black"})]}),i===e.id&&(0,s.jsx)("div",{ref:c,id:new Date().getDate().toString()+e.id,className:"absolute right-[80px] translate-x-1/2 top-8  flex w-[150px]  flex-col bg-white border border-[#E9E9E9] rounded-[8px] shadow-md z-50",children:(0,s.jsxs)("button",{onClick:()=>u(e.id),className:"px-4 py-2 flex items-center gap-2 text-sm justify-start text-black hover:bg-[#F4F4F4]",children:[(0,s.jsx)(g(),{src:x,alt:"delete",width:16,height:16}),(0,s.jsx)("span",{children:"Delete"})]})})]},r))},r)}):(0,s.jsx)("p",{className:"text-[14px] text-center text-black font-secondary",children:"No search history available."})})},w=r(49445),v=r(40525),j=r(14738);let b=e=>{let t={};return e.forEach(e=>{let r,s,{id:n,value:o,timestamp:a}=e;try{r=new Date(a)}catch(e){r=new Date}let i=new Date;if((0,v.z)(r))s="Today";else if((0,j.g)(r))s="1 day ago";else{let e=Math.ceil((i.getTime()-r.getTime())/864e5);s=isNaN(e)?"Today":"".concat(e," days ago")}t[s]||(t[s]=[]),t[s].push({id:n,value:o})}),Object.fromEntries(Object.entries(t).sort((e,t)=>{let[r]=e,[s]=t;return"Today"===r?-1:"Today"===s?1:"1 day ago"===r?-1:"1 day ago"===s?1:parseInt(r.split(" ")[0])-parseInt(s.split(" ")[0])}))};var y=function(){let[e,t]=(0,a.KO)(p.EJ),[r,x]=(0,a.KO)(p.Kq),[f,v]=(0,a.KO)(p.zK),[j]=(0,a.KO)(p.N$),y=(0,i.useRouter)(),S=(0,i.usePathname)(),[E,C]=(0,n.useState)(!1),[,N]=(0,a.KO)(p.ZC),[,k]=(0,a.KO)(p.tO),[O]=(0,n.useState)(""),F=async e=>{try{let t=await (0,w.FB)(e);N(e=>[...e,t.images])}catch(e){console.error("Error fetching images:",e)}},D=async e=>{try{let t=await (0,w.oo)(e);k(e=>[...e,t.videos])}catch(e){console.error("Error fetching videos:",e)}},K=async e=>{if(v(!0),!f){"/search/chat"!==S&&await y.push("/search/chat");let r=new Date().toISOString();t(t=>{let s=t.length>0?t[t.length-1].id:0;return[...t,{id:s+1,value:e,timestamp:r}]}),F(e),D(e),x(t=>({...t,searchValues:[...t.searchValues,e]}));try{await (0,w.oi)(e,e=>{x(t=>{let r=t.responses.length-1;return{...t,responses:t.responses.map((t,s)=>s===r?{...t,content:t.content+e}:t)}})},e=>{let t=(null==e?void 0:e.sources)||[],r=null==e?void 0:e.related_searches;x(e=>({...e,responses:[...e.responses,{sources:t,relatedSearches:r||[],content:"",timestamp:new Date().toISOString(),errors:{sourcesError:"",contentError:""},isStreamComplete:!1}]}))},e=>{x(t=>{let r=t.responses.length-1;return!(r>=0)||t.responses[r].errors.sourcesError||t.responses[r].errors.contentError?{...t,responses:[...t.responses,{sources:[],relatedSearches:[],content:"",timestamp:new Date().toISOString(),errors:e,isStreamComplete:!0}]}:{...t,responses:t.responses.map((t,s)=>s===r?{...t,errors:{...t.errors,...e},relatedSearches:t.relatedSearches,isStreamComplete:!0}:t)}})},()=>{x(e=>{let t=e.responses.length-1;return{...e,responses:e.responses.map((e,r)=>r===t?{...e,isStreamComplete:!0}:e)}})})}catch(e){console.error("Error during postData call:",e)}finally{v(!1)}}},T=Object.entries(b(e)).reduce((e,t)=>{let[r,s]=t,n=s.filter(e=>{let{value:t}=e;return t.toLowerCase().includes(O.toLowerCase())});return n.length>0&&(e[r]=n),e},{});return(0,s.jsxs)("div",{className:"fixed left-4 z-100 flex items-start pt-[100px]",children:[(0,s.jsx)(o.fC,{open:E,onOpenChange:C,children:(0,s.jsx)("div",{className:"transition-all duration-300 ".concat(E?"w-[232px] overflow-y-auto p-2":"w-0 overflow-hidden"," h-[calc(100vh-120px)] rounded-12 bg-white"),children:(0,s.jsx)(o.VY,{children:(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[(0,s.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,s.jsx)(l.zx,{variant:"ghost",size:"xs",className:"w-[174px] !justify-between",iconRight:(0,s.jsx)(g(),{src:c,alt:"short",width:16,height:16}),children:"New chat"}),(0,s.jsx)("div",{onClick:()=>C(e=>!e),className:"flex h-[34px] w-[34px] cursor-pointer items-center justify-center",children:(0,s.jsx)(g(),{src:d,alt:"hide",width:16,height:16})})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h2",{className:"px-1.5 text-[14px] font-[400] leading-[140%] text-[#878787]",children:"History"}),(0,s.jsx)("ul",{className:"mt-2 flex flex-col gap-2",children:(0,s.jsx)(m,{handlePost:K,filteredHistory:T})})]})]})})})}),!E&&(0,s.jsxs)("div",{className:"ml-2 flex flex-row gap-2 lg:flex-col",children:[(0,s.jsx)("div",{className:"flex h-[34px] w-[34px] cursor-pointer items-center justify-center rounded-6 border-[0.5px] border-[#E8E8E8] bg-[#FFF] shadow-md",onClick:()=>C(!E),children:(0,s.jsx)(g(),{src:h,alt:"slide",width:16,height:16})}),(0,s.jsx)("div",{onClick:()=>{y.push("/search")},className:"flex h-[34px] w-[34px] cursor-pointer items-center justify-center rounded-6 border-[0.5px] border-[#E8E8E8] bg-[#FFF] shadow-md",children:(0,s.jsx)(g(),{src:u,alt:"plus",width:16,height:16})})]})]})}},41053:function(e,t,r){r.d(t,{Z:function(){return x}});var s=r(52676);r(75271);var n=r(40507),o=r.n(n),a=r(226),i=r(92848),l=r(86365),c=r(32353);let d=new l.S;function h(e){let{children:t}=e;return(0,s.jsx)(c.aH,{client:d,children:t})}function u(){return(0,s.jsx)("div",{className:"relative bottom-0 mt-10 w-full py-4 ",children:(0,s.jsxs)("div",{className:"flex h-full w-full items-center justify-center font-secondary text-[13px] font-[400] leading-[140%] text-[#6E6E6E]",children:["\xa9 ",new Date().getFullYear()," Traix AI. All Rights Reserved."]})})}function p(e){let{children:t}=e;return(0,s.jsx)(h,{children:(0,s.jsx)(a.Q2,{children:(0,s.jsxs)("div",{className:"global-wrapper relative flex min-h-screen flex-col justify-between overflow-hidden bg-[#f9f9f9]",children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)("main",{className:"relative z-5",children:t}),(0,s.jsx)(u,{})]})})})}p.propTypes={children:o().node};var x=p},95986:function(e,t,r){var s=r(52676);r(75271);var n=r(40507),o=r.n(n),a=r(25930),i=r(26419);function l(e){let{children:t,className:r="",wideContainer:n=!1,overContainer:o,overContainerBottom:l,disabledContainer:c=!1,...d}=e;return(0,s.jsxs)("section",{className:"".concat(r," overflow-hidden"),...d,children:[o&&(0,s.jsx)("div",{className:"over-container",children:o}),n&&(0,s.jsx)(i.Z,{children:t}),!n&&!c&&(0,s.jsx)(a.Z,{children:t}),c&&(0,s.jsx)("div",{className:"disabled-container",children:t}),l&&(0,s.jsx)("div",{className:"over-container-bottom",children:l})]})}l.propTypes={children:o().node,overContainer:o().node,overContainerBottom:o().node,className:o().string,wideContainer:o().bool,disabledContainer:o().bool},t.Z=l},49445:function(e,t,r){r.d(t,{FB:function(){return a},oi:function(){return o},oo:function(){return i}});var s=r(30656);let n="https://staging-searchapi.tars.pro",o=async(e,t,r,s,o)=>{try{var a;let i=await fetch("".concat(n,"/chat"),{method:"POST",headers:{accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:e})});if(!i.ok){let e=await i.json(),t=(null==e?void 0:e.detail)||i.statusText||"Unknown error occurred";r(""),s({sourcesError:"Error: ".concat(t,"!"),contentError:t});return}let l=null===(a=i.body)||void 0===a?void 0:a.getReader(),c=new TextDecoder("utf-8"),d=!0,h="";if(l)for(;;){let{done:e,value:s}=await l.read();if(e){o();break}let n=c.decode(s,{stream:!0});if(d){let[e,s]=n.split("$**$"),o=JSON.parse(e);if(d=!1,r(o),s){let e=(h+=s).match(/"content":\s*"([^"]+)"/g);if(e&&e.length>0){let r=e.map(e=>{var t;return null===(t=e.match(/"content":\s*"([^"]+)"/))||void 0===t?void 0:t[1]}).filter(Boolean).join("");t(r),h=""}}}else{let e=(h+=n).match(/"content":\s*"([^"]+)"/g);if(e&&e.length>0){let r=e.map(e=>{var t;return null===(t=e.match(/"content":\s*"([^"]+)"/))||void 0===t?void 0:t[1]}).filter(Boolean).join("");t(r),h=""}else console.log("Content not found in this chunk")}}}catch(e){console.error("Error during fetch:",e),s({sourcesError:"Failed to fetch the API.",contentError:"Failed to fetch the API."})}},a=async e=>(await s.Z.post("".concat(n,"/images"),{query:e},{headers:{accept:"application/json","Content-Type":"application/json"}})).data,i=async e=>(await s.Z.post("".concat(n,"/videos"),{query:e},{headers:{accept:"application/json","Content-Type":"application/json"}})).data},98950:function(e,t,r){r.d(t,{EJ:function(){return o},Kq:function(){return a},N$:function(){return l},ZC:function(){return c},tO:function(){return d},zK:function(){return i}});var s=r(93431),n=r(55916);let o=(0,n.O4)("history",[]),a=(0,s.cn)({searchValues:[],responses:[]}),i=(0,s.cn)(!1),l=(0,n.O4)("bookmarks",[]),c=(0,s.cn)([]),d=(0,s.cn)([])}}]);